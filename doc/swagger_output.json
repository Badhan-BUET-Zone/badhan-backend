{
  "swagger": "2.0",
  "info": {
    "version": "3.0.0",
    "title": "Badhan API",
    "description": "Automatically generated documentation of Badhan API. The backend is documented and currently maintained by Sumaiya Azad"
  },
  "host": "badhan-web.herokuapp.com",
  "basePath": "/",
  "tags": [
    {
      "name": "User",
      "description": "Authentication Endpoints"
    },
    {
      "name": "Donors",
      "description": "Routes to handle donors"
    },
    {
      "name": "Deprecated",
      "description": "These routes will be deleted later"
    },
    {
      "name": "Logs",
      "description": "Fetch statistics about backend"
    },
    {
      "name": "Call Records",
      "description": "Fetch call records of donors"
    }
  ],
  "schemes": [
    "https"
  ],
  "securityDefinitions": {
    "api_key": {
      "type": "apiKey",
      "name": "x-auth",
      "in": "header"
    }
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/donors": {
      "post": {
        "tags": [
          "Donors"
        ],
        "description": "handles the insertion of a new donor into the database.",
        "parameters": [
          {
            "name": "insertDonor",
            "in": "body",
            "description": "donor info for inserting donor",
            "schema": {
              "type": "object",
              "properties": {
                "phone": {
                  "type": "number",
                  "example": 8801521438557
                },
                "bloodGroup": {
                  "type": "number",
                  "example": 2
                },
                "hall": {
                  "type": "number",
                  "example": 5
                },
                "name": {
                  "type": "string",
                  "example": "Mir Mahathir Mohammad"
                },
                "studentId": {
                  "type": "number",
                  "example": 1605011
                },
                "address": {
                  "type": "string",
                  "example": "Azimpur"
                },
                "roomNumber": {
                  "type": "string",
                  "example": "3009"
                },
                "comment": {
                  "type": "string",
                  "example": "developer of badhan"
                },
                "extraDonationCount": {
                  "type": "number",
                  "example": 2
                },
                "availableToAll": {
                  "type": "boolean",
                  "example": true
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "successful donor insertion",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "New donor inserted successfully"
                },
                "newDonor": {
                  "type": "string",
                  "example": "new donor data"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "If the donor with same phone number already exists in the database with another hall name, user will get the error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "New donor insertion unsuccessful"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "If the donor with same phone number already exists in the database with another hall name, user will get the error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Donor found with duplicate phone number in another hall"
                },
                "donor": {
                  "type": "string",
                  "example": "this field will return null"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "409": {
            "description": "If the donor already exists in the database, user will get the error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Donor found with duplicate phone number"
                },
                "donor": {
                  "type": "string",
                  "example": "donor array"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "500": {
            "description": "In case of internal server error, the user will get this message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "error message"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Donors"
        ],
        "description": "handles the fetching of donor details.",
        "parameters": [
          {
            "name": "donorId",
            "description": "Donor id for donor details",
            "type": "string",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "donor info",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Successfully fetched donor details"
                },
                "donor": {
                  "type": "object",
                  "properties": {
                    "_id": {
                      "type": "string",
                      "example": "abjcguiwefvew"
                    },
                    "phone": {
                      "type": "number",
                      "example": 8801521438557
                    },
                    "name": {
                      "type": "string",
                      "example": "Mir Mahathir Mohammad"
                    },
                    "studentId": {
                      "type": "number",
                      "example": 1605011
                    },
                    "lastDonation": {
                      "type": "number",
                      "example": 987876287160
                    },
                    "bloodGroup": {
                      "type": "number",
                      "example": 2
                    },
                    "hall": {
                      "type": "number",
                      "example": 5
                    },
                    "roomNumber": {
                      "type": "string",
                      "example": "3009"
                    },
                    "address": {
                      "type": "string",
                      "example": "Azimpur"
                    },
                    "comment": {
                      "type": "string",
                      "example": "developer of badhan"
                    },
                    "commentTime": {
                      "type": "number",
                      "example": 0
                    },
                    "designation": {
                      "type": "number",
                      "example": 3
                    },
                    "donationCount": {
                      "type": "number",
                      "example": 2
                    },
                    "availableToAll": {
                      "type": "boolean",
                      "example": true
                    },
                    "callRecords": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "61018f6f49904a07f010d0c8"
                          },
                          "callerId": {
                            "type": "object",
                            "properties": {
                              "designation": {
                                "type": "number",
                                "example": 1
                              },
                              "_id": {
                                "type": "string",
                                "example": "61011bd99bf18c82b9e56209"
                              },
                              "hall": {
                                "type": "number",
                                "example": 5
                              },
                              "name": {
                                "type": "string",
                                "example": "Mir Mahathir (Volunteer)"
                              }
                            }
                          },
                          "calleeId": {
                            "type": "string",
                            "example": "5e6781006ecd148aa8cc76d8"
                          },
                          "date": {
                            "type": "number",
                            "example": 1627492207064
                          },
                          "expireAt": {
                            "type": "string",
                            "example": "2021-08-27T17:10:07.066Z"
                          },
                          "__v": {
                            "type": "number",
                            "example": 0
                          }
                        }
                      }
                    },
                    "donations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "date": {
                            "type": "number",
                            "example": 1546300800000
                          },
                          "_id": {
                            "type": "string",
                            "example": "5e6781006ecd148aa8cc76d8"
                          },
                          "phone": {
                            "type": "number",
                            "example": 8801724097983
                          },
                          "donorId": {
                            "type": "string",
                            "example": "5e6781006ecd148aa8cc76d8"
                          }
                        }
                      }
                    }
                  }
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "When no donor with the specified donor id is found, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Query error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal server error",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Donors"
        ],
        "description": "Handles the update of donor information.",
        "parameters": [
          {
            "name": "editDonor",
            "in": "body",
            "description": "donor info for editing donor",
            "schema": {
              "type": "object",
              "properties": {
                "donorId": {
                  "type": "string",
                  "example": "ghjdgejhd7623jhs"
                },
                "name": {
                  "type": "string",
                  "example": "Mir Mahathir Mohammad"
                },
                "phone": {
                  "type": "number",
                  "example": 8801521438557
                },
                "studentId": {
                  "type": "number",
                  "example": 1605011
                },
                "bloodGroup": {
                  "type": "number",
                  "example": 2
                },
                "hall": {
                  "type": "number",
                  "example": 3
                },
                "roomNumber": {
                  "type": "string",
                  "example": "3009"
                },
                "address": {
                  "type": "string",
                  "example": "Azimpur"
                },
                "availableToAll": {
                  "type": "boolean",
                  "example": true
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Donor info update successful",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Donor updated successfully"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "When no donor with the specified donor id is found, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Query error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "This middleware is used to block the manipulation of data of a member with higher designation",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "You cannot modify the details of a Badhan member with higher designation"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal server error",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Donors"
        ],
        "description": "handles the deletion of an existing donor from the database.",
        "parameters": [
          {
            "name": "donorId",
            "in": "query",
            "description": "donor id for deleting donation",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful donor deletion",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Donor deleted successfully"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "When no donor with the specified donor id is found, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Query error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "This middleware is used to block the manipulation of data of a member with higher designation",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "You cannot modify the details of a Badhan member with higher designation"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "404": {
            "description": "Error occured when deleting target donor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "Error occurred in deleting target donor"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "500": {
            "description": "In case of internal server error, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "Internal server error"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/donors/me": {
      "get": {
        "tags": [
          "Donors"
        ],
        "description": "Handles the fetching of own details.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Info of the logged in user",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Successfully fetched donor details"
                },
                "donor": {
                  "type": "object",
                  "properties": {
                    "_id": {
                      "type": "string",
                      "example": "abjcguiwefvew"
                    },
                    "phone": {
                      "type": "number",
                      "example": 8801521438557
                    },
                    "name": {
                      "type": "string",
                      "example": "Mir Mahathir Mohammad"
                    },
                    "studentId": {
                      "type": "number",
                      "example": 1605011
                    },
                    "lastDonation": {
                      "type": "number",
                      "example": 987876287160
                    },
                    "bloodGroup": {
                      "type": "number",
                      "example": 2
                    },
                    "hall": {
                      "type": "number",
                      "example": 5
                    },
                    "roomNumber": {
                      "type": "string",
                      "example": "3009"
                    },
                    "address": {
                      "type": "string",
                      "example": "Azimpur"
                    },
                    "comment": {
                      "type": "string",
                      "example": "Developer of badhan"
                    },
                    "designation": {
                      "type": "number",
                      "example": 3
                    },
                    "availableToAll": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "In case of internal server error, the user will get this message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/search/v2": {
      "get": {
        "tags": [
          "Donors"
        ],
        "description": "Searches for donors that matches the filters",
        "parameters": [
          {
            "name": "bloodGroup",
            "description": "blood group for donors",
            "type": "number",
            "in": "query"
          },
          {
            "name": "hall",
            "description": "hall for donors",
            "type": "number",
            "in": "query"
          },
          {
            "name": "batch",
            "description": "batch for donors",
            "type": "number",
            "in": "query"
          },
          {
            "name": "address",
            "description": "address for donors",
            "type": "string",
            "in": "query"
          },
          {
            "name": "isAvailable",
            "description": "isAvailable for donors",
            "type": "boolean",
            "in": "query"
          },
          {
            "name": "isNotAvailable",
            "description": "isNotAvailable for donors",
            "type": "boolean",
            "in": "query"
          },
          {
            "name": "availableToAll",
            "description": "availableToAll denotes the availability of the donor to the other hall members",
            "type": "boolean",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "This error will occur if the user tries to search other halls",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "You are not allowed to search donors of other halls"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/donors/comment": {
      "patch": {
        "tags": [
          "Donors"
        ],
        "description": "Adds a comment to a donor",
        "parameters": [
          {
            "name": "editDonorComment",
            "in": "body",
            "description": "donor info for posting comment",
            "schema": {
              "type": "object",
              "properties": {
                "donorId": {
                  "type": "string",
                  "example": "hujfsduif783ujh"
                },
                "comment": {
                  "type": "string",
                  "example": "Sample comment about donor"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Comment posted successfully"
                }
              },
              "xml": {
                "name": "main"
              }
            },
            "description": "In case of successfully saving the comment"
          },
          "400": {
            "description": "When no donor with the specified donor id is found, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Query error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "In case of internal server error, the user will get this message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/donors/password": {
      "patch": {
        "tags": [
          "Donors"
        ],
        "description": "Handles the changing of password for an account.",
        "parameters": [
          {
            "name": "changePassword",
            "in": "body",
            "description": "donor info for changing password",
            "schema": {
              "type": "object",
              "properties": {
                "donorId": {
                  "type": "string",
                  "example": "ghjdgejhd7623jhs"
                },
                "password": {
                  "type": "string",
                  "example": "thisisanewpassword"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful password change done",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Password changed successfully"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "When no donor with the specified donor id is found, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Query error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Target user does not have an account",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Target user does not have an account"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal server error",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/donors/designation": {
      "patch": {
        "tags": [
          "Donors"
        ],
        "description": "Handles the promotion or demotion of users.",
        "parameters": [
          {
            "name": "promote",
            "in": "body",
            "description": "If the user wants to promote the target donor, promoteFlag should be true and a new password is needed to be set. If the target donor needs to be demoted, the promoteFlag should be false.",
            "schema": {
              "type": "object",
              "properties": {
                "donorId": {
                  "type": "string",
                  "example": "hjasgd673278"
                },
                "promoteFlag": {
                  "type": "boolean",
                  "example": true
                },
                "password": {
                  "type": "string",
                  "example": "thisisanewpassword"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Target user promoted/demoted successfully"
                }
              },
              "xml": {
                "name": "main"
              }
            },
            "description": "Donor promotion/ demotion successful"
          },
          "400": {
            "description": "When no donor with the specified donor id is found, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Query error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "If user cannot promote volunteer or cannot demote donor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Can not promote volunteer or can not demote donor"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal server error",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/volunteers": {
      "get": {
        "tags": [
          "Donors"
        ],
        "description": "Handles the fetching of volunteer lists for a hall admin.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "An array of volunteers fetched successfully",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Volunteer list fetched successfully"
                },
                "volunteerList": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": {
                        "type": "string",
                        "example": "dskgjhwebkjsdbd"
                      },
                      "bloodGroup": {
                        "type": "number",
                        "example": 2
                      },
                      "name": {
                        "type": "string",
                        "example": "John Doe"
                      },
                      "phone": {
                        "type": "number",
                        "example": 8801456987445
                      },
                      "roomNumber": {
                        "type": "string",
                        "example": "409"
                      },
                      "studentId": {
                        "type": "number",
                        "example": 1610000
                      }
                    }
                  }
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "The filter parameters are incorrect",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "In case of internal server error, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "Internal server error"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/volunteers/all": {
      "get": {
        "tags": [
          "Donors"
        ],
        "description": "Fetches all volunteers",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Volunteer list fetch successful",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Volunteer list fetch successful"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "Volunteer list fetch unsuccessful",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "In case of internal server error, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "Internal server error"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/admins": {
      "patch": {
        "tags": [
          "Donors"
        ],
        "description": "Promotes a volunteer to hall admin and demotes the existing hall admin to volunteer",
        "parameters": [
          {
            "name": "admin",
            "in": "body",
            "description": "donor info for changing admin",
            "schema": {
              "type": "object",
              "properties": {
                "donorId": {
                  "type": "string",
                  "example": "hdjhd12vhjgj3428569834hth"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully changed hall admin",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Successfully changed hall admin"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "Previous hall admin demotion successful, but could not set new hall admin",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Demoted previous hall admin, but could not set new hall admin"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "If fetched user is not a volunteer , user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "User is not a volunteer"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "500": {
            "description": "In case of internal server error, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Internal server error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Donors"
        ],
        "description": "handles the fetching of hall admin list for a super admin.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Hall admin list fetch successful ",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Hall admin list fetched successfully"
                },
                "admins": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": {
                        "type": "string",
                        "example": "reohrewoihgfsdn"
                      },
                      "hall": {
                        "type": "number",
                        "example": 0
                      },
                      "name": {
                        "type": "string",
                        "example": "Salman Khan"
                      },
                      "phone": {
                        "type": "number",
                        "example": 8801521478996
                      }
                    }
                  }
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "If user does not exists in database, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "In case of internal server error, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Internal server error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/": {
      "post": {
        "tags": [
          "Call Records"
        ],
        "description": "Endpoint to insert a call record",
        "parameters": [
          {
            "name": "CallRecordObject",
            "in": "body",
            "description": "Contains the donor id of callee",
            "schema": {
              "type": "object",
              "properties": {
                "donorId": {
                  "type": "string",
                  "example": "fwetiubg43t6847gsdffwekt"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Call record insertion successful",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Call record insertion successful"
                },
                "callRecord": {
                  "type": "object",
                  "properties": {
                    "date": {
                      "type": "number",
                      "example": 1625755390858
                    },
                    "_id": {
                      "type": "string",
                      "example": "60e70f42055a83d88"
                    },
                    "callerId": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "5e901d56e0177ced73"
                        },
                        "name": {
                          "type": "string",
                          "example": "Mir Mahathir Mohammad"
                        },
                        "designation": {
                          "type": "number",
                          "example": 3
                        },
                        "hall": {
                          "type": "number",
                          "example": 4
                        }
                      }
                    },
                    "calleeId": {
                      "type": "string",
                      "example": "5e68514546b0e"
                    }
                  }
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "When no donor with the specified donor id is found, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Query error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "In case of internal server error, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Internal server error)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Call Records"
        ],
        "description": "handles the retrieval of call history for a particular donor.",
        "parameters": [
          {
            "name": "donorId",
            "description": "donor info for call history",
            "type": "string",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Call record fetch successful",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Call record fetch successful"
                },
                "callRecords": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "OK"
                    },
                    "message": {
                      "type": "string",
                      "example": "Call record fetch successful"
                    },
                    "callRecord": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "date": {
                            "type": "number",
                            "example": 1625754390478
                          },
                          "_id": {
                            "type": "string",
                            "example": "60e70d6972a660d4f156906b"
                          },
                          "callerId": {
                            "type": "string",
                            "example": "5e901d56effc5900177ced73"
                          },
                          "calleeId": {
                            "type": "string",
                            "example": "5e68514995b0367d81546b0e"
                          }
                        }
                      }
                    }
                  }
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "When no donor with the specified donor id is found, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "(Query error message)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "In case of internal server error, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Internal server error)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Call Records"
        ],
        "description": "handles the deletion of one call history for a particular donor.",
        "parameters": [
          {
            "name": "donorId",
            "description": "Id of donor for call history",
            "type": "string",
            "in": "query"
          },
          {
            "name": "callRecordId",
            "description": "Id of call record that is going to be deleted ",
            "type": "string",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Call record deletion successful",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Call record deletion successful"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "This error occurs if the call record does not associate with the target donor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Target donor does not have the callee of call record"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "This error occurs if the call record does not exist",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Call record not found"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "500": {
            "description": "In case of internal server error, user will get this error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "(Internal server error)"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/signin": {
      "post": {
        "tags": [
          "User"
        ],
        "description": "Endpoint to login a user.",
        "parameters": [
          {
            "name": "signIn",
            "in": "body",
            "description": "Phone number of a logging user.",
            "schema": {
              "type": "object",
              "properties": {
                "phone": {
                  "type": "string",
                  "example": "8801521438557"
                },
                "password": {
                  "type": "string",
                  "example": "123456"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "A successful sign in returns a token for the user",
            "schema": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string",
                  "example": "lksjaopirnboishbnoiwergnbsdiobhsiognkghesuiog"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "When the user provides an invalid password",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Incorrect phone / password"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "500": {
            "description": "When the server malfunctions to the request body",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "EXCEPTION"
                },
                "message": {
                  "type": "string",
                  "example": "message generated from the backend caused by runtime error"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/signout": {
      "delete": {
        "tags": [
          "User"
        ],
        "description": "Endpoint to logout a user.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "A successful sign out removes the token for the user",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Logged out successfully"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "In case of internal server error user will receive an error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "error message"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/signout/all": {
      "delete": {
        "tags": [
          "User"
        ],
        "description": "Endpoint to logout user from all devices.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "A successful sign out removes all the tokens of the user",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Logged out from all devices successfully"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "In case of internal server error user will receive an error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "error message"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    },
    "/redirection": {
      "post": {
        "tags": [
          "User"
        ],
        "description": "Endpoint to request a temporary redirection token",
        "parameters": [],
        "responses": {
          "201": {
            "description": "Redirection token created",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Redirection token created"
                },
                "token": {
                  "type": "string",
                  "example": "lksjaopirnboishbnoiwergnbsdiobhsiognkghesuiog"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "In case of internal server error user will receive an error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "error message"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "User"
        ],
        "description": "Route endpoint to redirect user from app to web.",
        "parameters": [
          {
            "name": "logIn",
            "in": "body",
            "description": "The temporary token generated by /user/requestRedirection",
            "schema": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string",
                  "example": "sdlfkhgoenguiehgfudsnbvsiugkb"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Redirection token created",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "OK"
                },
                "message": {
                  "type": "string",
                  "example": "Redirected login successful"
                },
                "token": {
                  "type": "string",
                  "example": "lksjaopirnboishbnoiwergnbsdiobhsiognkghesuiog"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "This error will occur if the user does not exist",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "Authentication failed. Invalid authentication token."
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "In case of internal server error user will receive an error message",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "example": "ERROR"
                },
                "message": {
                  "type": "string",
                  "example": "error message"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "Donors": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "example": "5e901d56effc5900177ced73"
        },
        "designation": {
          "type": "number",
          "example": 3
        },
        "lastDonation": {
          "type": "number",
          "example": 0
        },
        "donationCount": {
          "type": "number",
          "example": 0
        },
        "phone": {
          "type": "number",
          "example": 8801521438557
        },
        "bloodGroup": {
          "type": "number",
          "example": 2
        },
        "hall": {
          "type": "number",
          "example": 5
        },
        "name": {
          "type": "string",
          "example": "Mir Mahathir Mohammad"
        },
        "studentId": {
          "type": "string",
          "example": "1605011"
        },
        "address": {
          "type": "string",
          "example": "Azimpur road"
        },
        "roomNumber": {
          "type": "string",
          "example": ""
        },
        "comment": {
          "type": "string",
          "example": "Designer and developer of Badhan Web and App"
        },
        "tokens": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "_id": {
                "type": "string",
                "example": "608fc94c28599700175b31eb"
              },
              "token": {
                "type": "string",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZTkwMWQ1NmVmZmM1OTAwM..."
              }
            }
          }
        },
        "password": {
          "type": "string",
          "example": "$2a$10$9B3aSkcw7n0/H.vQq5MMQeaeosyssb/VsjvLFydGQiTMYS89a9vkS"
        }
      }
    },
    "Donations": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "example": "5e6776166f73f925e22a0574"
        },
        "phone": {
          "type": "number",
          "example": 8801746027313
        },
        "date": {
          "type": "number",
          "example": 1514764800000
        },
        "donorId": {
          "type": "string",
          "example": "5e6776166f73f925e22a0574"
        }
      }
    }
  }
}